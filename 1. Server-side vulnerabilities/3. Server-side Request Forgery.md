<h1>Server-side Request Forgery (SSRF)</h1>
<h2>1. SSRF là gì?</h2>
<p>SSRF là khi <b><i>attacker ép server gửi request</i></b> đến một nơi mà server không nên gửi. Thay vì máy của attacker gửi request, họ lừa ứng dụng để chính server gửi request thay họ.
</p>
<p>Điều này rất nguy hiểm vì server thường có quyền truy cập nhiều tài nguyên nội bộ mà người dùng bình thường không thấy.</p>

<h2>2. Cách hoạt động</h2>
<p>Server có một cổng đặc biệt gọi là loopback, địa chỉ:</p>
<pre>127.0.0.1
localhost</pre>
<p>Đây là địa chỉ "tự quay lại chính mình".</p>
<p><strong>Ví dụ</strong></p>
<p>Một ứng dụng cho phép user xem số lượng sản phẩm trong kho.<br>Phía server gọi đến API như:</p>
<pre>stockApi=http://stock.weliketoshop.net:8080/product/stock/check?...</pre>
<p>Attacker thay URL này thành:</p>
<pre>stockApi=http://localhost/admin</pre>
<p>Kết quả:</p>
<ul>
  <li>Server tự truy cập vào <code>/admin</code></li>
  <li>Trả nội dung trang admin về cho attacker</li>
  <li>Bypass luôn cả login vì server tự tin rằng request nội bộ là đáng tin</li>
</ul>

<h2>3. Tại sao nhiều ứng dụng tin tưởng request nội bộ?</h2>
<ol>
  <li>Access control nằm ở tầng phía trước (reverse proxy). Khi request quay ngược vào server, nó bypass tầng kiểm soát.</li>
  <li>Cơ chế disaster recovery cho phép admin truy cập không cần login nếu đến từ localhost.</li>
  <li>Giao diện admin chạy port khác nên tuy user không thể truy cập trực tiếp, server lại truy cập được.</li>
</ol>
<p>=> Chính các lí do này khiến SSRF trở nên cực kỳ nguy hiểm.</p>

<h2>4. SSRF tấn công các hệ thống nội bộ khác (intranet)</h2>
<p>Nhiều server có quyền truy cập mạng nội bộ:</p>
<ul>
  <li>Dải IP private như <code>192.168.x.x</code>, <code>10.x.x.x</code>, <code>172.16.x.x</code></li>
  <li>Các hệ thống này thường không yêu cầu authentication.</li>
</ul>
<p><strong>Ví dụ</strong></p>
<p>Server có admin panel nội bộ: <code>https://192.168.0.68/admin</code></p>
<p>Attacker chỉ cần gửi request SSRF: <code>stockApi=http://192.168.0.68/admin</code></p>
<p>Server sẽ:</p>
<ul>
  <li>Truy cập hệ thống internal thay attacker</li>
  <li>Lấy dữ liệu về</li>
  <li>Gửi trả lại cho attacker</li>
</ul>
<p>=> Attacker chiếm toàn quyền hệ thống admin.</p>








